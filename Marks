package com.example.marks;

import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

public class MainActivity extends AppCompatActivity {
    EditText name, mark1, mark2;
    SharedPreferences sp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sp = getSharedPreferences("MyPref", MODE_PRIVATE);

        name = findViewById(R.id.uname);
        mark1 = findViewById(R.id.mark1);
        mark2 = findViewById(R.id.mark2);

        // Load saved data if exists
        if (sp.contains("Name"))
            name.setText(sp.getString("Name", ""));
        if (sp.contains("Mark1"))
            mark1.setText(sp.getString("Mark1", ""));
        if (sp.contains("Mark2"))
            mark2.setText(sp.getString("Mark2", ""));
    }

    public void calculatePercentage(View v) {
        String userName = name.getText().toString().trim();
        String mark1Str = mark1.getText().toString().trim();
        String mark2Str = mark2.getText().toString().trim();

        // Validate name
        if (userName.isEmpty()) {
            name.setError("Please enter your name");
            name.requestFocus();
            return;
        }

        // Validate mark1
        if (mark1Str.isEmpty()) {
            mark1.setError("Please enter Mark 1");
            mark1.requestFocus();
            return;
        }

        // Validate mark2
        if (mark2Str.isEmpty()) {
            mark2.setError("Please enter Mark 2");
            mark2.requestFocus();
            return;
        }

        int m1, m2;
        try {
            m1 = Integer.parseInt(mark1Str);
            m2 = Integer.parseInt(mark2Str);
        } catch (NumberFormatException e) {
            Toast.makeText(this, "Marks must be valid numbers", Toast.LENGTH_SHORT).show();
            return;
        }

        if (m1 < 0 || m1 > 100) {
            mark1.setError("Mark must be between 0 and 100");
            mark1.requestFocus();
            return;
        }
        if (m2 < 0 || m2 > 100) {
            mark2.setError("Mark must be between 0 and 100");
            mark2.requestFocus();
            return;
        }

        // Save data in SharedPreferences
        SharedPreferences.Editor editor = sp.edit();
        editor.putString("Name", userName);
        editor.putString("Mark1", mark1Str);
        editor.putString("Mark2", mark2Str);
        editor.apply();

        // Calculate percentage
        float percentage = ((m1 + m2) / 200f) * 100f;

        // Pass data to next activity
        Intent intent = new Intent(this, MainActivity2.class);
        intent.putExtra("name", userName);
        intent.putExtra("percentage", percentage);
        startActivity(intent);
    }
}




<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="24dp">

    <EditText
        android:id="@+id/uname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Enter Name"
        android:inputType="textPersonName" />

    <EditText
        android:id="@+id/mark1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Enter Mark 1"
        android:inputType="number"
        />

    <EditText
        android:id="@+id/mark2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Enter Mark 2"
        android:inputType="number"
     />

    <Button
        android:id="@+id/calcButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="calculatePercentage"
        android:text="Calculate" />

</LinearLayout>




Activity Main 2

package com.example.marks;

import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

import androidx.appcompat.app.AppCompatActivity;

public class MainActivity2 extends AppCompatActivity {
    TextView t1, t2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        t1 = findViewById(R.id.userview);
        t2 = findViewById(R.id.percentageview);

        // Get data from Intent extras
        String name = getIntent().getStringExtra("name");
        float percentage = getIntent().getFloatExtra("percentage", 0);

        // Display data
        t1.setText("Name: " + name);
        t2.setText(String.format("Percentage: %.2f%%", percentage));
    }

    public void previousActivity(View v) {
        // Finish this activity to go back
        finish();
    }
}



<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="24dp">

    <TextView
        android:id="@+id/userview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Name:"
        android:textSize="18sp"
       />

    <TextView
        android:id="@+id/percentageview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Percentage:"
        android:textSize="18sp"
        />

    <Button
        android:id="@+id/previousButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="previousActivity"
        android:text="Back" />

</LinearLayout>
